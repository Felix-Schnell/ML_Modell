Projektstruktur und Ablage der Dateien
Alle fÃ¼r die REST-API und die zugehÃ¶rigen Tests relevanten Dateien sollten im Ordner REST-API/ liegen:
REST-API/
â”œâ”€â”€ fraud_api.py            # Haupt-API mit FastAPI
â”œâ”€â”€ test_fraud_api.py       # Testskript mit Pytest fÃ¼r die API
â”œâ”€â”€ scaler.pkl              # Gespeicherter StandardScaler
â”œâ”€â”€ xgboost_model.pkl       # Gespeichertes XGBoost-Modell
â”œâ”€â”€ feature_names.pkl       # Liste der Feature-Namen
â”œâ”€â”€ autoencoder_model.h5    # Keras Autoencoder Modell

## REST-API zur automatisierten Betrugserkennung

Dieses Projekt enthÃ¤lt eine voll funktionsfÃ¤hige REST-Programmierschnittstelle (API), die es ermÃ¶glicht, Betrugswahrscheinlichkeiten fÃ¼r Kassentransaktionen automatisiert Ã¼ber HTTP-Requests zu berechnen â€“ unabhÃ¤ngig von der Streamlit-OberflÃ¤che.

Starten:

py -m uvicorn fraud_api:app --reload

### ðŸ”Œ Endpoint
POST /fraud-prediction
Die API ist lokal erreichbar unter:
http://127.0.0.1:8000/fraud-prediction





### Zweck der API

Die REST-API ist speziell dafÃ¼r vorgesehen, **automatisch und maschinell angesprochen zu werden**, z.â€¯B. aus anderen Python-Programmen, Test-Skripten oder Tools.  

---

### Beispiel-Request (Python)

json_data = {
  "transaction_header": {
    "store_id": "c1f5d15e-baf6-41e2-890a-135c24cf4c32",
    "cash_desk": 2,
    "transaction_start": "2025-07-08T12:00:00",
    "transaction_end": "2025-07-08T12:01:30",
    "total_amount": 42.75,
    "payment_medium": "CASH",
    "customer_feedback": 4
  },
  "transaction_lines": [
    {
      "id": 1,
      "product_id": "f20c1a10-3c51-4a91-9f80-4563a7e157bc",
      "timestamp": "2025-07-08T12:00:10",
      "pieces_or_weight": 1,
      "sales_price": 18.50,
      "was_voided": false,
      "camera_product_similar": true,
      "camera_certainty": 0.6
    },
    {
      "id": 2,
      "product_id": "87412601-4aa6-4c00-84f2-5f3ad2aa67cd",
      "timestamp": "2025-07-08T12:00:45",
      "pieces_or_weight": 1,
      "sales_price": 24.25,
      "was_voided": false,
      "camera_product_similar": true,
      "camera_certainty": 0.65
    }
  ]
}

{
  "version": "1.2.3",
  "is_fraud": true,
  "fraud_proba": 0.823479,
  "estimated_damage": 9.53,
  "explanation": {
    "human_readable_reason": "Low camera certainty on products; High transaction amount",
    "offending_products": ["PERSONAL CARE"]
  }
}

API Testen mit test_fraud_api.py
Das Testskript test_fraud_api.py enthÃ¤lt automatisierte Tests, die Ã¼berprÃ¼fen, ob die API erwartungsgemÃ¤ÃŸ auf Anfragen reagiert.

Nutzung:
Stelle sicher, dass die REST-API nicht separat gestartet ist (die Tests importieren die API intern).

Starte die Tests mit:
py -m pytest test_fraud_api.py
Das Skript sendet Beispielanfragen an die API-Funktion und vergleicht die Antwort mit den Erwartungen.
PÃ¼rft, ob die API mit HTTP 200 antwortet.

Zweck:
Sicherstellen, dass die API korrekt funktioniert und keine Fehler wirft.

Automatisierte QualitÃ¤tssicherung vor Deployment oder Abgabe.
